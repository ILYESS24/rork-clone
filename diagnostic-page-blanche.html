<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç DIAGNOSTIC PAGE BLANCHE - Rork Platform</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        .diagnostic-item {
            background: rgba(255,255,255,0.2);
            margin: 20px 0;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ff6b6b;
        }
        .success {
            border-left-color: #51cf66;
        }
        .warning {
            border-left-color: #ffd43b;
        }
        .error {
            border-left-color: #ff6b6b;
        }
        .test-button {
            background: #51cf66;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #40c057;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            background: rgba(0,0,0,0.3);
        }
        .error-result {
            background: rgba(255, 107, 107, 0.3);
        }
        .success-result {
            background: rgba(81, 207, 102, 0.3);
        }
        .code {
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç DIAGNOSTIC COMPLET - PAGE BLANCHE</h1>
        <p><strong>Date:</strong> <span id="current-date"></span></p>
        <p><strong>URL:</strong> <span id="current-url"></span></p>

        <div class="diagnostic-item">
            <h3>1. üîç V√âRIFICATION √âL√âMENT ROOT</h3>
            <button class="test-button" onclick="checkRootElement()">V√©rifier l'√©l√©ment root</button>
            <div id="root-result" class="result"></div>
        </div>

        <div class="diagnostic-item">
            <h3>2. üìú V√âRIFICATION SCRIPTS CHARG√âS</h3>
            <button class="test-button" onclick="checkScripts()">V√©rifier les scripts</button>
            <div id="scripts-result" class="result"></div>
        </div>

        <div class="diagnostic-item">
            <h3>3. üé® V√âRIFICATION STYLES CHARG√âS</h3>
            <button class="test-button" onclick="checkStyles()">V√©rifier les styles</button>
            <div id="styles-result" class="result"></div>
        </div>

        <div class="diagnostic-item">
            <h3>4. ‚ö†Ô∏è V√âRIFICATION ERREURS JAVASCRIPT</h3>
            <button class="test-button" onclick="checkErrors()">V√©rifier les erreurs</button>
            <div id="errors-result" class="result"></div>
        </div>

        <div class="diagnostic-item">
            <h3>5. üåê V√âRIFICATION R√âSEAU</h3>
            <button class="test-button" onclick="checkNetwork()">V√©rifier le r√©seau</button>
            <div id="network-result" class="result"></div>
        </div>

        <div class="diagnostic-item">
            <h3>6. üîß TEST REACT MANUEL</h3>
            <button class="test-button" onclick="testReact()">Tester React manuellement</button>
            <div id="react-result" class="result"></div>
        </div>

        <div class="diagnostic-item">
            <h3>7. üöÄ SOLUTION D'URGENCE</h3>
            <button class="test-button" onclick="emergencyFix()">APPLIQUER SOLUTION D'URGENCE</button>
            <div id="emergency-result" class="result"></div>
        </div>

        <div class="diagnostic-item">
            <h3>8. üìä R√âSUM√â DIAGNOSTIC</h3>
            <button class="test-button" onclick="generateReport()">G√©n√©rer le rapport</button>
            <div id="report-result" class="result"></div>
        </div>
    </div>

    <script>
        // Variables globales pour stocker les r√©sultats
        let diagnosticResults = {
            rootElement: null,
            scripts: [],
            styles: [],
            errors: [],
            network: [],
            reactTest: null,
            emergencyApplied: false
        };

        // Initialisation
        document.getElementById('current-date').textContent = new Date().toLocaleString();
        document.getElementById('current-url').textContent = window.location.href;

        function checkRootElement() {
            const rootElement = document.getElementById('root');
            const resultDiv = document.getElementById('root-result');
            
            if (rootElement) {
                diagnosticResults.rootElement = {
                    exists: true,
                    innerHTML: rootElement.innerHTML,
                    className: rootElement.className,
                    styles: window.getComputedStyle(rootElement)
                };
                
                resultDiv.className = 'result success-result';
                resultDiv.innerHTML = `
                    <strong>‚úÖ √âl√©ment root trouv√©</strong><br>
                    <div class="code">
                        InnerHTML: "${rootElement.innerHTML}"<br>
                        Classes: "${rootElement.className}"<br>
                        Visible: ${rootElement.offsetWidth > 0 ? 'Oui' : 'Non'}<br>
                        Hauteur: ${rootElement.offsetHeight}px<br>
                        Largeur: ${rootElement.offsetWidth}px
                    </div>
                `;
            } else {
                diagnosticResults.rootElement = { exists: false };
                resultDiv.className = 'result error-result';
                resultDiv.innerHTML = '<strong>‚ùå √âl√©ment root NON TROUV√â !</strong><br>Le div avec id="root" n\'existe pas dans le DOM.';
            }
        }

        function checkScripts() {
            const scripts = document.querySelectorAll('script');
            const resultDiv = document.getElementById('scripts-result');
            diagnosticResults.scripts = [];
            
            let html = '<strong>üìú Scripts trouv√©s:</strong><br>';
            
            scripts.forEach((script, index) => {
                const scriptInfo = {
                    src: script.src,
                    type: script.type,
                    async: script.async,
                    defer: script.defer
                };
                diagnosticResults.scripts.push(scriptInfo);
                
                html += `<div class="code">
                    ${index + 1}. ${script.src || 'Script inline'}<br>
                    Type: ${script.type || 'text/javascript'}<br>
                    Async: ${script.async ? 'Oui' : 'Non'}<br>
                    Defer: ${script.defer ? 'Oui' : 'Non'}
                </div>`;
            });
            
            resultDiv.className = 'result ' + (scripts.length > 0 ? 'success-result' : 'error-result');
            resultDiv.innerHTML = html;
        }

        function checkStyles() {
            const styles = document.querySelectorAll('link[rel="stylesheet"]');
            const resultDiv = document.getElementById('styles-result');
            diagnosticResults.styles = [];
            
            let html = '<strong>üé® Styles trouv√©s:</strong><br>';
            
            styles.forEach((style, index) => {
                const styleInfo = {
                    href: style.href,
                    media: style.media
                };
                diagnosticResults.styles.push(styleInfo);
                
                html += `<div class="code">
                    ${index + 1}. ${style.href}<br>
                    Media: ${style.media || 'all'}
                </div>`;
            });
            
            resultDiv.className = 'result ' + (styles.length > 0 ? 'success-result' : 'error-result');
            resultDiv.innerHTML = html;
        }

        function checkErrors() {
            const resultDiv = document.getElementById('errors-result');
            diagnosticResults.errors = [];
            
            // Capturer les erreurs existantes
            window.addEventListener('error', function(e) {
                diagnosticResults.errors.push({
                    message: e.message,
                    filename: e.filename,
                    lineno: e.lineno,
                    colno: e.colno,
                    error: e.error
                });
            });
            
            // Capturer les promesses rejet√©es
            window.addEventListener('unhandledrejection', function(e) {
                diagnosticResults.errors.push({
                    type: 'promise',
                    reason: e.reason
                });
            });
            
            let html = '<strong>‚ö†Ô∏è Erreurs d√©tect√©es:</strong><br>';
            
            if (diagnosticResults.errors.length === 0) {
                html += '<div class="code">Aucune erreur JavaScript d√©tect√©e pour le moment.</div>';
                resultDiv.className = 'result success-result';
            } else {
                diagnosticResults.errors.forEach((error, index) => {
                    html += `<div class="code">
                        Erreur ${index + 1}:<br>
                        Message: ${error.message}<br>
                        Fichier: ${error.filename}<br>
                        Ligne: ${error.lineno}
                    </div>`;
                });
                resultDiv.className = 'result error-result';
            }
            
            resultDiv.innerHTML = html;
        }

        function checkNetwork() {
            const resultDiv = document.getElementById('network-result');
            diagnosticResults.network = [];
            
            // V√©rifier les ressources charg√©es
            const resources = performance.getEntriesByType('resource');
            let html = '<strong>üåê Ressources charg√©es:</strong><br>';
            
            resources.forEach((resource, index) => {
                const resourceInfo = {
                    name: resource.name,
                    duration: resource.duration,
                    size: resource.transferSize,
                    status: 'loaded'
                };
                diagnosticResults.network.push(resourceInfo);
                
                html += `<div class="code">
                    ${index + 1}. ${resource.name.split('/').pop()}<br>
                    Dur√©e: ${Math.round(resource.duration)}ms<br>
                    Taille: ${resource.transferSize} bytes
                </div>`;
            });
            
            resultDiv.className = 'result success-result';
            resultDiv.innerHTML = html;
        }

        function testReact() {
            const resultDiv = document.getElementById('react-result');
            
            try {
                // Test si React est disponible
                if (typeof React !== 'undefined') {
                    diagnosticResults.reactTest = { available: true };
                    resultDiv.className = 'result success-result';
                    resultDiv.innerHTML = '<strong>‚úÖ React est disponible</strong><br>React est charg√© et accessible.';
                } else {
                    diagnosticResults.reactTest = { available: false };
                    resultDiv.className = 'result error-result';
                    resultDiv.innerHTML = '<strong>‚ùå React NON DISPONIBLE</strong><br>React n\'est pas charg√© ou accessible.';
                }
            } catch (error) {
                diagnosticResults.reactTest = { available: false, error: error.message };
                resultDiv.className = 'result error-result';
                resultDiv.innerHTML = `<strong>‚ùå Erreur lors du test React:</strong><br>${error.message}`;
            }
        }

        function emergencyFix() {
            const resultDiv = document.getElementById('emergency-result');
            
            try {
                // Solution d'urgence : cr√©er du contenu dans root
                let rootElement = document.getElementById('root');
                
                if (!rootElement) {
                    // Cr√©er l'√©l√©ment root s'il n'existe pas
                    rootElement = document.createElement('div');
                    rootElement.id = 'root';
                    document.body.appendChild(rootElement);
                }
                
                // Ajouter du contenu d'urgence
                rootElement.innerHTML = `
                    <div style="
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        min-height: 100vh;
                        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                        color: white;
                        font-family: Arial, sans-serif;
                        text-align: center;
                        padding: 20px;
                    ">
                        <div>
                            <h1>üöÄ Rork Platform</h1>
                            <p>Application en cours de chargement...</p>
                            <p>Si cette page persiste, il y a un probl√®me avec le JavaScript.</p>
                            <div style="margin-top: 30px;">
                                <a href="/builder" style="
                                    display: inline-block;
                                    padding: 12px 24px;
                                    background: white;
                                    color: #667eea;
                                    text-decoration: none;
                                    border-radius: 8px;
                                    margin: 5px;
                                    font-weight: bold;
                                ">üîß Builder</a>
                                <a href="/marketplace" style="
                                    display: inline-block;
                                    padding: 12px 24px;
                                    background: white;
                                    color: #667eea;
                                    text-decoration: none;
                                    border-radius: 8px;
                                    margin: 5px;
                                    font-weight: bold;
                                ">üè™ Marketplace</a>
                                <a href="/analytics" style="
                                    display: inline-block;
                                    padding: 12px 24px;
                                    background: white;
                                    color: #667eea;
                                    text-decoration: none;
                                    border-radius: 8px;
                                    margin: 5px;
                                    font-weight: bold;
                                ">üìä Analytics</a>
                            </div>
                            <div style="margin-top: 20px; font-size: 14px; opacity: 0.8;">
                                <p>üîß Solution d'urgence appliqu√©e - ${new Date().toLocaleTimeString()}</p>
                            </div>
                        </div>
                    </div>
                `;
                
                diagnosticResults.emergencyApplied = true;
                resultDiv.className = 'result success-result';
                resultDiv.innerHTML = '<strong>‚úÖ SOLUTION D\'URGENCE APPLIQU√âE</strong><br>Contenu d\'urgence ajout√© √† l\'√©l√©ment root.';
                
            } catch (error) {
                resultDiv.className = 'result error-result';
                resultDiv.innerHTML = `<strong>‚ùå Erreur lors de l'application de la solution:</strong><br>${error.message}`;
            }
        }

        function generateReport() {
            const resultDiv = document.getElementById('report-result');
            
            let report = '<strong>üìä RAPPORT DE DIAGNOSTIC</strong><br>';
            report += `<div class="code">
Date: ${new Date().toLocaleString()}<br>
URL: ${window.location.href}<br><br>
`;

            // R√©sum√© des r√©sultats
            report += 'R√âSUM√â:<br>';
            report += `‚Ä¢ √âl√©ment root: ${diagnosticResults.rootElement?.exists ? '‚úÖ Trouv√©' : '‚ùå Manquant'}<br>`;
            report += `‚Ä¢ Scripts: ${diagnosticResults.scripts.length} trouv√©s<br>`;
            report += `‚Ä¢ Styles: ${diagnosticResults.styles.length} trouv√©s<br>`;
            report += `‚Ä¢ Erreurs: ${diagnosticResults.errors.length} d√©tect√©es<br>`;
            report += `‚Ä¢ React: ${diagnosticResults.reactTest?.available ? '‚úÖ Disponible' : '‚ùå Non disponible'}<br>`;
            report += `‚Ä¢ Solution d'urgence: ${diagnosticResults.emergencyApplied ? '‚úÖ Appliqu√©e' : '‚ùå Non appliqu√©e'}<br>`;
            
            report += '</div>';
            
            // Recommandations
            report += '<br><strong>üîß RECOMMANDATIONS:</strong><br>';
            report += '<div class="code">';
            
            if (!diagnosticResults.rootElement?.exists) {
                report += '1. ‚ùå CRITIQUE: L\'√©l√©ment root est manquant<br>';
            }
            if (diagnosticResults.scripts.length === 0) {
                report += '2. ‚ùå CRITIQUE: Aucun script JavaScript charg√©<br>';
            }
            if (diagnosticResults.errors.length > 0) {
                report += '3. ‚ö†Ô∏è ATTENTION: Erreurs JavaScript d√©tect√©es<br>';
            }
            if (!diagnosticResults.reactTest?.available) {
                report += '4. ‚ùå CRITIQUE: React n\'est pas disponible<br>';
            }
            
            if (diagnosticResults.rootElement?.exists && diagnosticResults.scripts.length > 0 && diagnosticResults.reactTest?.available) {
                report += '‚úÖ Tous les √©l√©ments de base sont pr√©sents. Le probl√®me peut venir du routage ou de la logique React.';
            }
            
            report += '</div>';
            
            resultDiv.className = 'result';
            resultDiv.innerHTML = report;
        }

        // Auto-ex√©cuter les tests de base
        setTimeout(() => {
            checkRootElement();
            checkScripts();
            checkStyles();
            checkErrors();
            checkNetwork();
            testReact();
        }, 1000);
    </script>
</body>
</html>
